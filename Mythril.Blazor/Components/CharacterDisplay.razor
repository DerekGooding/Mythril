@using Mythril.Data

<div class="character-display">
    <h4>@Character.Name</h4>
    @if (QuestProgress is not null)
    {
        <QuestProgressCard QuestProgress="QuestProgress" OnCompletionAnimationEnd="() => OnCompletionAnimationEnd.InvokeAsync(QuestProgress)" />
    }
    else
    {
        <DropZone OnQuestDrop="HandleTaskDrop" Accepts="Accepts" />
    }
</div>

@code {
    [Parameter]
    public Character Character { get; set; }

    [Parameter]
    public QuestProgress? QuestProgress { get; set; }

    [Parameter]
    public EventCallback<object> OnQuestDrop { get; set; }

    [Parameter]
    public Func<object, bool>? Accepts { get; set; }

    [Parameter]
    public EventCallback<QuestProgress> OnCompletionAnimationEnd { get; set; }

    private void HandleTaskDrop(object task)
    {
        OnQuestDrop.InvokeAsync(task);
    }
}
